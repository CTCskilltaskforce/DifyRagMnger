# コーディング規約 / Code Style

目的: このファイルはリポジトリ内で一貫した可読性の高いコードを書くための最低限のルールを示します。設計書やコードは人間が読みやすいことを最優先にしてください。

## 基本方針
- ファイル冒頭に目的を1〜2行で記載する。
- 公開関数・クラスには日本語のdocstringを付け、入力値・返り値・副作用を明記する。
- 重要なアルゴリズムや意図が分かりにくい箇所には短い日本語コメントを付ける（冗長なコメントは避ける）。
- 命名は説明的に。プロジェクト全体で一貫性を保つ（英語識別子を採用する場合は英語で統一）。

## Python 具体ルール
- 文法/整形ツール: `black`（自動整形）、`isort`（インポート整列）、`ruff`/`flake8`（リント）を推奨。
- 型注釈を積極的に使う。`mypy` で型チェックを行うこと。
- 関数は短く、1つの責務に限定する。複雑処理は小さな関数に分割する。
- 例外は適切に捕捉し、ログに十分なコンテキストを出力する。

## docstring とコメント
- public API の docstring は日本語で書き、以下を含める:
  - 概要（何をするか）
  - 入力パラメータ（型と意味）
  - 返り値（型と意味）
  - 例外・副作用（ファイル書き込み等）
- 実装コメントは短く具体的に。警告や注意点があれば明記する。

## テスト
- テストは `pytest` を使用する。単体テストを重視し、重要な処理には必ずカバレッジのあるテストを用意する。
- テストファイルは `tests/unit/` や `tests/integration/` に分け、ファイル名は `test_*.py` とする。

## 推奨コマンド（ローカル）
```bash
# 整形
black .
isort .

# 型チェック
mypy src

# テスト実行
pytest -q
```

## CI / pre-commit の提案
- 可能であれば pre-commit を導入し、コミット前に `black` / `isort` / `ruff` を自動実行することを推奨します。
- CI では `black --check`、`isort --check-only`、`mypy`、`pytest` を実行して品質ゲートとしてください。

## その他運用ルール
- 変更を加えるときは必ず小さなコミットに分け、テストが通ることを確認してからプッシュする。
- ドキュメント（spec/plan/research 等）は日本語で要約を先頭に置き、実装上の注意点を最後に記載する。

---
このファイルは最小限のガイドラインです。必要ならプロジェクト固有の `pyproject.toml`/`.pre-commit-config.yaml` のテンプレートを追加します。希望があれば次に作成します。