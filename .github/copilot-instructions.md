# Copilot Instructions for DifyRagMnger

## 原理原則
- AIエージェントは、受け答えを日本語で行うこと。
- 計画書、設計書などのmarkdownファイルは日本語で作成すること。
- AIエージェントは、与えられたプロンプト指示書に厳密に従い、手順を忠実に実行すること。
- AIエージェントは、プログラムを作成・修正する場合、context7 mcpを利用して関連するライブラリの正確な情報収集を行うこと。
- AIエージェントは、プログラムを作成・修正する場合、serena mcpを利用して影響調査を行うこと。

## 概要
このリポジトリは、Difyのナレッジを登録・更新する処理を自動化するプログラムの開発プロジェクトです。 
本ドキュメントは、Github Spec Kitに基づきAIエージェントが効率的に開発を進めるためのルールやワークフローを定義しています。

## 主要ディレクトリ・ファイル
### Spec Kit関連フォルダ
- `scripts/`：主要な開発ワークフローを自動化するシェルスクリプト群。例：`create-new-feature.sh`（新機能ブランチと仕様書の自動生成）、`setup-plan.sh`（計画フェーズのセットアップ）
- `templates/`：仕様書・計画書・タスク管理などのMarkdownテンプレート。
- `memory/constitution.md`：プロジェクトの基本方針やルールを記載。
- `.github/prompts/`：AIエージェント向けのプロンプト指示書。

## ワークフローの特徴
- **新機能追加**：
  1. `scripts/create-new-feature.sh --json "<機能説明>"` を実行し、ブランチ作成・仕様書初期化。
  2. `templates/spec-template.md` をもとに仕様書を作成。
  3. 以降の工程もスクリプトとテンプレートで管理。
- **AIエージェント利用**：
  - `.github/prompts/`配下の指示書に従い、各工程を自動化・標準化。
  - 仕様書や計画書は必ずテンプレートの構造・セクション順を守る。

## プロジェクト固有のルール・パターン
- 仕様書・計画書・タスク管理はすべてMarkdownで管理し、テンプレートを厳守。
- スクリプトはbash（.sh）形式。WSLを使用すること。
- `memory/constitution.md`はプロジェクトの「憲法」として最優先で参照。
- AIエージェントは、プロンプト指示書（例：`specify.prompt.md`）の手順を厳密に守ること。

## 例：新機能追加のAIエージェント手順
1. `scripts/create-new-feature.sh --json "<機能説明>"` を実行し、出力JSONから `BRANCH_NAME` と `SPEC_FILE` を取得。
2. `templates/spec-template.md` を読み、仕様書を `SPEC_FILE` に作成。
3. 進捗や成果物は必ず絶対パスで報告。

## 注意点
- テンプレートのセクションや順序を変更しない。
- スクリプトの出力やテンプレートの内容は逐次確認し、最新状態を反映する。
- 仕様やルールの疑問点は `memory/constitution.md` を参照。

---
このドキュメントはAIエージェントの生産性向上のために随時更新してください。
